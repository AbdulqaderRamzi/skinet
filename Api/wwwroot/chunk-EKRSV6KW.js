import{A as R,B as w,D as E,F as f,G as j,H as k,K as O,N as $,O as z,o as B,q as p,s as U,t as d,u as F,x as _,z as P}from"./chunk-X4VFQYT7.js";import{a as h}from"./chunk-ES56HFQO.js";import{Ca as s,Fc as N,Ha as v,Hc as I,Ia as q,Ka as L,La as A,M as l,Ma as n,Na as a,Nb as V,Oa as u,Pb as y,Sa as C,Ta as x,db as m,eb as S,fb as G,ka as i,oa as D,sa as c,xa as b}from"./chunk-4FMWKDWO.js";function W(e,o){if(e&1&&(n(0,"mat-error"),m(1),a()),e&2){let t=x();i(),G("",t.label," is required")}}function X(e,o){e&1&&(n(0,"mat-error"),m(1,"Email is invalid "),a())}var g=class e{constructor(o){this.controlDir=o;this.controlDir.valueAccessor=this}label="";type="text";writeValue(o){}registerOnChange(o){}registerOnTouched(o){}get control(){return this.controlDir.control}static \u0275fac=function(t){return new(t||e)(D(U,2))};static \u0275cmp=c({type:e,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(t,r){t&1&&(n(0,"mat-form-field",0)(1,"mat-label"),m(2),a(),u(3,"input",1),b(4,W,2,1,"mat-error")(5,X,2,0,"mat-error"),a()),t&2&&(i(2),S(r.label),i(),s("formControl",r.control)("type",r.type)("placeholder",r.label),i(),v(r.control.hasError("required")?4:-1),i(),v(r.control.hasError("email")?5:-1))},dependencies:[f,B,d,P,O,$,k,j],encapsulation:2})};var M=class e{accountService=l(I);fb=l(E);router=l(y);activatedRouter=l(V);returnUrl="/shop";constructor(){let o=this.activatedRouter.snapshot.queryParams.returnUrl;o&&(this.returnUrl=o)}loginForm=this.fb.group({email:["",[p.required,p.email]],password:["",p.required]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-login"]],decls:9,vars:2,consts:[[1,"max-w-lg","mx-auto","mt-40","!bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","Email Address","formControlName","email"],["label","Password","formControlName","password","type","password"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"]],template:function(t,r){t&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return r.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Login"),a()(),u(5,"app-text-input",4)(6,"app-text-input",5),n(7,"button",6),m(8," Sign in "),a()()()),t&2&&(i(),s("formGroup",r.loginForm),i(6),s("disabled",r.loginForm.invalid))},dependencies:[f,_,d,F,R,w,h,N,g],encapsulation:2})};function Y(e,o){if(e&1&&(n(0,"li"),m(1),a()),e&2){let t=o.$implicit;i(),S(t)}}function Z(e,o){if(e&1&&(n(0,"div",8)(1,"ul",10),L(2,Y,2,1,"li",null,q),a()()),e&2){let t=x();i(2),A(t.validationErrors)}}var T=class e{fb=l(E);accountService=l(I);router=l(y);snack=l(z);validationErrors;registerForm=this.fb.group({firstName:["",p.required],lastName:["",p.required],email:["",[p.required,p.email]],password:["",p.required]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:o=>this.validationErrors=o})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-40","!bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(t,r){t&1&&(n(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return r.onSubmit()}),n(2,"div",2)(3,"h1",3),m(4,"Register"),a()(),u(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),b(9,Z,4,0,"div",8),n(10,"button",9),m(11,"Register"),a()()()),t&2&&(i(),s("formGroup",r.registerForm),i(8),v(r.validationErrors?9:-1),i(),s("disabled",r.registerForm.invalid))},dependencies:[f,_,d,F,R,w,h,N,g],encapsulation:2})};var wt=[{path:"register",component:T},{path:"login",component:M}];export{wt as accountRoutes};
